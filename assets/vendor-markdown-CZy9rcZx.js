import{o as e}from"./rolldown-runtime-tX5UdD3f.js";import{Tt as t,_ as n,a as r,c as i,d as a,f as o,g as s,h as c,i as l,l as u,m as d,o as f,p,s as m,u as h,v as g,vt as _,y as v}from"./vendor-BLq5sYt1.js";function y(e){let t=this;t.parser=n;function n(n){return c(n,{...t.data(`settings`),...e,extensions:t.data(`micromarkExtensions`)||[],mdastExtensions:t.data(`fromMarkdownExtensions`)||[]})}}function b(e,t){return e&&`run`in e?async function(n,r){let i=p(n,{file:r,...t});await e.run(i,r)}:function(n,r){return p(n,{file:r,...e||t})}}const x=(function(e){let t=this.constructor.prototype,n=t[e],r=function(){return n.apply(r,arguments)};return Object.setPrototypeOf(r,t),r});var S=e(a(),1),C={}.hasOwnProperty;const w=new class e extends x{constructor(){super(`copy`),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=u()}copy(){let t=new e,n=-1;for(;++n<this.attachers.length;){let e=this.attachers[n];t.use(...e)}return t.data((0,S.default)(!0,{},this.namespace)),t}data(e,t){return typeof e==`string`?arguments.length===2?(D(`data`,this.frozen),this.namespace[e]=t,this):C.call(this.namespace,e)&&this.namespace[e]||void 0:e?(D(`data`,this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;let e=this;for(;++this.freezeIndex<this.attachers.length;){let[t,...n]=this.attachers[this.freezeIndex];if(n[0]===!1)continue;n[0]===!0&&(n[0]=void 0);let r=t.call(e,...n);typeof r==`function`&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=1/0,this}parse(e){this.freeze();let t=A(e),n=this.parser||this.Parser;return T(`parse`,n),n(String(t),t)}process(e,t){let n=this;return this.freeze(),T(`process`,this.parser||this.Parser),E(`process`,this.compiler||this.Compiler),t?r(void 0,t):new Promise(r);function r(r,i){let a=A(e),o=n.parse(a);n.run(o,a,function(e,t,r){if(e||!t||!r)return s(e);let i=t,a=n.stringify(i,r);M(a)?r.value=a:r.result=a,s(e,r)});function s(e,n){e||!n?i(e):r?r(n):t(void 0,n)}}}processSync(e){let t=!1,n;return this.freeze(),T(`processSync`,this.parser||this.Parser),E(`processSync`,this.compiler||this.Compiler),this.process(e,r),k(`processSync`,`process`,t),n;function r(e,r){t=!0,o(e),n=r}}run(e,t,n){O(e),this.freeze();let r=this.transformers;return!n&&typeof t==`function`&&(n=t,t=void 0),n?i(void 0,n):new Promise(i);function i(i,a){let o=A(t);r.run(e,o,s);function s(t,r,o){let s=r||e;t?a(t):i?i(s):n(void 0,s,o)}}}runSync(e,t){let n=!1,r;return this.run(e,t,i),k(`runSync`,`run`,n),r;function i(e,t){o(e),r=t,n=!0}}stringify(e,t){this.freeze();let n=A(t),r=this.compiler||this.Compiler;return E(`stringify`,r),O(e),r(e,n)}use(e,...t){let n=this.attachers,r=this.namespace;if(D(`use`,this.frozen),e!=null)if(typeof e==`function`)s(e,t);else if(typeof e==`object`)Array.isArray(e)?o(e):a(e);else throw TypeError("Expected usable value, not `"+e+"`");return this;function i(e){if(typeof e==`function`)s(e,[]);else if(typeof e==`object`)if(Array.isArray(e)){let[t,...n]=e;s(t,n)}else a(e);else throw TypeError("Expected usable value, not `"+e+"`")}function a(e){if(!(`plugins`in e)&&!(`settings`in e))throw Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");o(e.plugins),e.settings&&(r.settings=(0,S.default)(!0,r.settings,e.settings))}function o(e){let t=-1;if(e!=null)if(Array.isArray(e))for(;++t<e.length;){let n=e[t];i(n)}else throw TypeError("Expected a list of plugins, not `"+e+"`")}function s(e,t){let r=-1,i=-1;for(;++r<n.length;)if(n[r][0]===e){i=r;break}if(i===-1)n.push([e,...t]);else if(t.length>0){let[r,...a]=t,o=n[i][1];h(o)&&h(r)&&(r=(0,S.default)(!0,o,r)),n[i]=[e,r,...a]}}}}().freeze();function T(e,t){if(typeof t!=`function`)throw TypeError("Cannot `"+e+"` without `parser`")}function E(e,t){if(typeof t!=`function`)throw TypeError("Cannot `"+e+"` without `compiler`")}function D(e,t){if(t)throw Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function O(e){if(!h(e)||typeof e.type!=`string`)throw TypeError("Expected node, got `"+e+"`")}function k(e,t,n){if(!n)throw Error("`"+e+"` finished async. Use `"+t+"` instead")}function A(e){return j(e)?e:new i(e)}function j(e){return!!(e&&typeof e==`object`&&`message`in e&&`messages`in e)}function M(e){return typeof e==`string`||N(e)}function N(e){return!!(e&&typeof e==`object`&&`byteLength`in e&&`byteOffset`in e)}var P=_();t();var F=[],I={allowDangerousHtml:!0},L=/^(https?|ircs?|mailto|xmpp)$/i,R=[{from:`astPlugins`,id:`remove-buggy-html-in-markdown-parser`},{from:`allowDangerousHtml`,id:`remove-buggy-html-in-markdown-parser`},{from:`allowNode`,id:`replace-allownode-allowedtypes-and-disallowedtypes`,to:`allowElement`},{from:`allowedTypes`,id:`replace-allownode-allowedtypes-and-disallowedtypes`,to:`allowedElements`},{from:`className`,id:`remove-classname`},{from:`disallowedTypes`,id:`replace-allownode-allowedtypes-and-disallowedtypes`,to:`disallowedElements`},{from:`escapeHtml`,id:`remove-buggy-html-in-markdown-parser`},{from:`includeElementIndex`,id:`#remove-includeelementindex`},{from:`includeNodeIndex`,id:`change-includenodeindex-to-includeelementindex`},{from:`linkTarget`,id:`remove-linktarget`},{from:`plugins`,id:`change-plugins-to-remarkplugins`,to:`remarkPlugins`},{from:`rawSourcePos`,id:`#remove-rawsourcepos`},{from:`renderers`,id:`change-renderers-to-components`,to:`components`},{from:`source`,id:`change-source-to-children`,to:`children`},{from:`sourcePos`,id:`#remove-sourcepos`},{from:`transformImageUri`,id:`#add-urltransform`,to:`urlTransform`},{from:`transformLinkUri`,id:`#add-urltransform`,to:`urlTransform`}];function z(e){let t=B(e),n=V(e);return H(t.runSync(t.parse(n),n),e)}function B(e){let t=e.rehypePlugins||F,n=e.remarkPlugins||F,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...I}:I;return w().use(y).use(n).use(b,r).use(t)}function V(e){let t=e.children||``,n=new i;return typeof t==`string`?n.value=t:``+t,n}function H(e,t){let r=t.allowedElements,i=t.allowElement,a=t.components,o=t.disallowedElements,c=t.skipHtml,l=t.unwrapDisallowed,u=t.urlTransform||U;for(let e of R)Object.hasOwn(t,e.from)&&``+e.from+(e.to?"use `"+e.to+"` instead":`remove it`)+e.id;return d(e,f),n(e,{Fragment:P.Fragment,components:a,ignoreInvalidStyle:!0,jsx:P.jsx,jsxs:P.jsxs,passKeys:!0,passNode:!0});function f(e,t,n){if(e.type===`raw`&&n&&typeof t==`number`)return c?n.children.splice(t,1):n.children[t]={type:`text`,value:e.value},t;if(e.type===`element`){let t;for(t in s)if(Object.hasOwn(s,t)&&Object.hasOwn(e.properties,t)){let n=e.properties[t],r=s[t];(r===null||r.includes(e.tagName))&&(e.properties[t]=u(String(n||``),t,e))}}if(e.type===`element`){let a=r?!r.includes(e.tagName):o?o.includes(e.tagName):!1;if(!a&&i&&typeof t==`number`&&(a=!i(e,t,n)),a&&n&&typeof t==`number`)return l&&e.children?n.children.splice(t,1,...e.children):n.children.splice(t,1),t}}}function U(e){let t=e.indexOf(`:`),n=e.indexOf(`?`),r=e.indexOf(`#`),i=e.indexOf(`/`);return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||L.test(e.slice(0,t))?e:``}var W={};function G(e){let t=this,n=e||W,i=t.data(),a=i.micromarkExtensions||=[],o=i.fromMarkdownExtensions||=[],s=i.toMarkdownExtensions||=[];a.push(r(n)),o.push(f()),s.push(m(n))}function K(){return function(e){l(e)}}export{G as n,z as r,K as t};